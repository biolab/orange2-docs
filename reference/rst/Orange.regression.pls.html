
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Partial least sqaures regression (PLS) &mdash; Orange Documentation v2.7.8</title>
    
    <link rel="stylesheet" href="../../_static/orange.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.7.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Orange Documentation v2.7.8" href="../../index.html" />
    <script type="text/javascript" src="../../_static/copybutton.js"></script>

  </head>
  <body>
	<div id="container">
    <div class="border1"></div>
    <div class="border2"></div>
    <div class="borderv">
        <div id="header">
			<div id="orangeimg"><h1><a href="http://orange.biolab.si"><img src="../../_static/orange-logo-w.png" alt="Orange" /></a></h1></div>

            <div id="cse-search-box" style="height: 22px;"></div>
            <div id="underimg"></div>
        </div>
    </div>
    <div class="border2"></div>
    <div class="border1"></div>

    <div id="main">
        <div class="border1"></div>
        <div class="border2"></div>
        <div class="borderv">
            <div id="maininner">
            <p style="font-size: 32px;">
                This is documentation for Orange 2.7. For the latest documentation, 
                <a href="http://orange.biolab.si/docs">
                see Orange 3</a>.
            </p>
 

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
    <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
           <p><a class="uplink" href="../../index.html">Orange Documentation v2.7.8</a></p>
           <ul>
<li><a class="reference internal" href="#">Partial least sqaures regression (<tt class="docutils literal"><span class="pre">PLS</span></tt>)</a><ul>
<li><a class="reference internal" href="#utility-functions">Utility functions</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    </div>
    
  <span class="target" id="module-Orange.regression.pls"></span><div class="section" id="partial-least-sqaures-regression-pls">
<h1>Partial least sqaures regression (<tt class="docutils literal"><span class="pre">PLS</span></tt>)<a class="headerlink" href="#partial-least-sqaures-regression-pls" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Partial_least_squares_regression">Partial least squares</a>
regression is a statistical method for simultaneous prediction of
multiple response variables. Orange&#8217;s implementation is
based on <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/pls.py">Scikit learn python implementation</a>.</p>
<p>The following code shows how to fit a PLS regression model on a multi-target data set.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">Orange</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&quot;multitarget-synthetic.tab&quot;</span><span class="p">)</span>
<span class="n">learner</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">regression</span><span class="o">.</span><span class="n">pls</span><span class="o">.</span><span class="n">PLSRegressionLearner</span><span class="p">()</span>
<span class="n">classifier</span> <span class="o">=</span> <span class="n">learner</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<dl class="class">
<dt id="Orange.regression.pls.PLSRegressionLearner">
<em class="property">class </em><tt class="descclassname">Orange.regression.pls.</tt><tt class="descname">PLSRegressionLearner</tt><big>(</big><em>n_comp=2</em>, <em>deflation_mode=regression</em>, <em>mode=PLS</em>, <em>algorithm=nipals</em>, <em>max_iter=500</em>, <em>imputer=None</em>, <em>continuizer=None</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.PLSRegressionLearner" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the partial least squares regression model, i.e. learn the
regression parameters. The implementation is based on <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/pls.py">Scikit
learn python implementation</a></p>
<p>The class is derived from
<a class="reference internal" href="Orange.regression.html#Orange.regression.base.BaseRegressionLearner" title="Orange.regression.base.BaseRegressionLearner"><tt class="xref py py-class docutils literal"><span class="pre">Orange.regression.base.BaseRegressionLearner</span></tt></a> that is
used for preprocessing the data (continuization and imputation)
before fitting the regression parameters</p>
<dl class="method">
<dt id="Orange.regression.pls.PLSRegressionLearner.__call__">
<tt class="descname">__call__</tt><big>(</big><em>table</em>, <em>weight_id=None</em>, <em>x_vars=None</em>, <em>y_vars=None</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.PLSRegressionLearner.__call__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> (<a class="reference internal" href="Orange.data.table.html#Orange.data.Table" title="Orange.data.Table"><tt class="xref py py-class docutils literal"><span class="pre">Orange.data.Table</span></tt></a>) &#8211; data instances.</li>
<li><strong>y_vars</strong> (<em>x_vars,</em>) &#8211; List of input and response variables
(<a class="reference internal" href="Orange.feature.descriptor.html#Orange.feature.Continuous" title="Orange.feature.Continuous"><tt class="xref py py-obj docutils literal"><span class="pre">Orange.feature.Continuous</span></tt></a> or
<a class="reference internal" href="Orange.feature.descriptor.html#Orange.feature.Discrete" title="Orange.feature.Discrete"><tt class="xref py py-obj docutils literal"><span class="pre">Orange.feature.Discrete</span></tt></a>). If <tt class="docutils literal"><span class="pre">None</span></tt> (default) it is
assumed that the data domain provides information which variables
are reponses and which are not. If data has
<a class="reference internal" href="Orange.data.domain.html#Orange.data.Domain.class_var" title="Orange.data.Domain.class_var"><tt class="xref py py-obj docutils literal"><span class="pre">class_var</span></tt></a> defined in its domain, a
single-target regression learner is constructed. Otherwise a
multi-target learner predicting response variables defined by
<a class="reference internal" href="Orange.data.domain.html#Orange.data.Domain.class_vars" title="Orange.data.Domain.class_vars"><tt class="xref py py-obj docutils literal"><span class="pre">class_vars</span></tt></a> is constructed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Orange.regression.pls.PLSRegressionLearner.__init__">
<tt class="descname">__init__</tt><big>(</big><em>n_comp=2</em>, <em>deflation_mode=regression</em>, <em>mode=PLS</em>, <em>algorithm=nipals</em>, <em>max_iter=500</em>, <em>imputer=None</em>, <em>continuizer=None</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.PLSRegressionLearner.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="Orange.regression.pls.PLSRegressionLearner.n_comp">
<tt class="descname">n_comp</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegressionLearner.n_comp" title="Permalink to this definition">¶</a></dt>
<dd><p>number of components to keep (default: 2)</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegressionLearner.deflation_mode">
<tt class="descname">deflation_mode</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegressionLearner.deflation_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>&#8220;canonical&#8221; or &#8220;regression&#8221; (default)</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegressionLearner.mode">
<tt class="descname">mode</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegressionLearner.mode" title="Permalink to this definition">¶</a></dt>
<dd><p>&#8220;CCA&#8221; or &#8220;PLS&#8221; (default)</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegressionLearner.algorithm">
<tt class="descname">algorithm</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegressionLearner.algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>The algorithm for estimating the weights:
&#8220;nipals&#8221; or &#8220;svd&#8221; (default)</p>
</dd></dl>

</dd></dl>

<dl class="method">
<dt id="Orange.regression.pls.PLSRegressionLearner.fit">
<tt class="descname">fit</tt><big>(</big><em>X</em>, <em>Y</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.PLSRegressionLearner.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit all unknown parameters, i.e.
weights, scores, loadings (for x and y) and regression coefficients.
Return a dict with all of the parameters.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Orange.regression.pls.PLSRegression">
<em class="property">class </em><tt class="descclassname">Orange.regression.pls.</tt><tt class="descname">PLSRegression</tt><big>(</big><em>domain=None</em>, <em>multitarget=False</em>, <em>coefs=None</em>, <em>sigma_x=None</em>, <em>sigma_y=None</em>, <em>mu_x=None</em>, <em>mu_y=None</em>, <em>x_vars=None</em>, <em>y_vars=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.PLSRegression" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict values of the response variables
based on the values of independent variables.</p>
<p>Basic notations:
n - number of data instances
p - number of independent variables
q - number of reponse variables</p>
<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.T">
<tt class="descname">T</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.T" title="Permalink to this definition">¶</a></dt>
<dd><p>A n x n_comp numpy array of x-scores</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.U">
<tt class="descname">U</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.U" title="Permalink to this definition">¶</a></dt>
<dd><p>A n x n_comp numpy array of y-scores</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.W">
<tt class="descname">W</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.W" title="Permalink to this definition">¶</a></dt>
<dd><p>A p x n_comp numpy array of x-weights</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.C">
<tt class="descname">C</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.C" title="Permalink to this definition">¶</a></dt>
<dd><p>A q x n_comp numpy array of y-weights</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.P">
<tt class="descname">P</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.P" title="Permalink to this definition">¶</a></dt>
<dd><p>A p x n_comp numpy array of x-loadings</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.Q">
<tt class="descname">Q</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.Q" title="Permalink to this definition">¶</a></dt>
<dd><p>A q x n_comp numpy array of y-loading</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.coefs">
<tt class="descname">coefs</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.coefs" title="Permalink to this definition">¶</a></dt>
<dd><p>A p x q numpy array coefficients
of the linear model: Y = X coefs + E</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.x_vars">
<tt class="descname">x_vars</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.x_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Predictor variables</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.regression.pls.PLSRegression.y_vars">
<tt class="descname">y_vars</tt><a class="headerlink" href="#Orange.regression.pls.PLSRegression.y_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Response variables</p>
</dd></dl>

<dl class="method">
<dt id="Orange.regression.pls.PLSRegression.__call__">
<tt class="descname">__call__</tt><big>(</big><em>instance</em>, <em>result_type=0</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.PLSRegression.__call__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>instance</strong> (<a class="reference internal" href="Orange.data.instance.html#Orange.data.Instance" title="Orange.data.Instance"><tt class="xref py py-class docutils literal"><span class="pre">Orange.data.Instance</span></tt></a>) &#8211; data instance for which the value of the response
variable will be predicted</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Orange.regression.pls.PLSRegression.to_string">
<tt class="descname">to_string</tt><big>(</big><big>)</big><a class="headerlink" href="#Orange.regression.pls.PLSRegression.to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty-prints the coefficient of the PLS regression model.</p>
</dd></dl>

</dd></dl>

<div class="section" id="utility-functions">
<h2>Utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="Orange.regression.pls.normalize_matrix">
<tt class="descclassname">Orange.regression.pls.</tt><tt class="descname">normalize_matrix</tt><big>(</big><em>X</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.normalize_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize a matrix column-wise: subtract the means and divide by
standard deviations. Returns the standardized matrix, sample mean
and standard deviation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>X</strong> (<tt class="xref py py-class docutils literal"><span class="pre">numpy.array</span></tt>) &#8211; data matrix</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Orange.regression.pls.nipals_xy">
<tt class="descclassname">Orange.regression.pls.</tt><tt class="descname">nipals_xy</tt><big>(</big><em>X</em>, <em>Y</em>, <em>mode=PLS</em>, <em>max_iter=500</em>, <em>tol=1e-06</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.nipals_xy" title="Permalink to this definition">¶</a></dt>
<dd><p>NIPALS algorithm; returns the first left and rigth singular
vectors of X&#8217;Y.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>Y</strong> (<em>X,</em>) &#8211; data matrix</li>
<li><strong>mode</strong> (<a class="reference external" href="http://docs.python.org/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; possible values &#8220;PLS&#8221; (default) or &#8220;CCA&#8221;</li>
<li><strong>max_iter</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; maximal number of iterations (default: 500)</li>
<li><strong>tol</strong> (<em>a not negative float</em>) &#8211; tolerance parameter; if norm of difference
between two successive left singular vectors is less than tol,
iteration is stopped</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Orange.regression.pls.svd_xy">
<tt class="descclassname">Orange.regression.pls.</tt><tt class="descname">svd_xy</tt><big>(</big><em>X</em>, <em>Y</em><big>)</big><a class="headerlink" href="#Orange.regression.pls.svd_xy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first left and right singular
vectors of X&#8217;Y.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>Y</strong> (<em>X,</em>) &#8211; data matrix</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>The following code predicts the values of output variables for the
first two instances in <tt class="docutils literal"><span class="pre">data</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&quot;Prediction for the first 2 data instances: </span><span class="se">\n</span><span class="s">&quot;</span> 
<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[:</span><span class="mi">2</span><span class="p">]:</span>
    <span class="k">print</span> <span class="s">&quot;Actual    &quot;</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">get_classes</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">&quot;Predicted &quot;</span><span class="p">,</span> <span class="n">classifier</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">print</span> 
</pre></div>
</div>
<div class="highlight-python"><pre>Actual     [&lt;orange.Value 'Y1'='0.490'&gt;, &lt;orange.Value 'Y2'='1.237'&gt;, &lt;orange.Value 'Y3'='1.808'&gt;, &lt;orange.Value 'Y4'='0.422'&gt;]
Predicted  [&lt;orange.Value 'Y1'='0.613'&gt;, &lt;orange.Value 'Y2'='0.826'&gt;, &lt;orange.Value 'Y3'='1.084'&gt;, &lt;orange.Value 'Y4'='0.534'&gt;]

Actual     [&lt;orange.Value 'Y1'='0.167'&gt;, &lt;orange.Value 'Y2'='-0.664'&gt;, &lt;orange.Value 'Y3'='-1.378'&gt;, &lt;orange.Value 'Y4'='0.589'&gt;]
Predicted  [&lt;orange.Value 'Y1'='0.058'&gt;, &lt;orange.Value 'Y2'='-0.706'&gt;, &lt;orange.Value 'Y3'='-1.420'&gt;, &lt;orange.Value 'Y4'='0.599'&gt;]</pre>
</div>
<p>To see the coefficient of the model, print the model:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&#39;Regression coefficients:</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">classifier</span>    
</pre></div>
</div>
<div class="highlight-python"><pre>Regression coefficients:
                   Y1           Y2           Y3           Y4
      X1        0.714        2.153        3.590       -0.078 
      X2       -0.238       -2.500       -4.797       -0.036 
      X3        0.230       -0.314       -0.880       -0.060 </pre>
</div>
<p>Note that coefficients are stored in a matrix since the model predicts
values of multiple outputs.</p>
</div>
</div>
</div>



          </div>
        </div>
      </div> 
      <div class="clearer"></div>
    </div>  
	
    <div class="footer">
    </div>
	            </div>
        </div>
        <div class="border1"></div>
        <div class="border2"></div>
    </div>
</div>

  </body>
</html>