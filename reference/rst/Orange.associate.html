
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Association rules and frequent itemsets (associate) &mdash; Orange Documentation v2.7.8</title>
    
    <link rel="stylesheet" href="../../_static/orange.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.7.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Orange Documentation v2.7.8" href="../../index.html" />
    <script type="text/javascript" src="../../_static/copybutton.js"></script>

  </head>
  <body>
	<div id="container">
    <div class="border1"></div>
    <div class="border2"></div>
    <div class="borderv">
        <div id="header">
			<div id="orangeimg"><h1><a href="http://orange.biolab.si"><img src="../../_static/orange-logo-w.png" alt="Orange" /></a></h1></div>

            <div id="cse-search-box" style="height: 22px;"></div>
            <div id="underimg"></div>
        </div>
    </div>
    <div class="border2"></div>
    <div class="border1"></div>

    <div id="main">
        <div class="border1"></div>
        <div class="border2"></div>
        <div class="borderv">
            <div id="maininner">
            <p style="font-size: 32px;">
                This is documentation for Orange 2.7. For the latest documentation, 
                <a href="http://orange.biolab.si/docs">
                see Orange 3</a>.
            </p>
 

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
    <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
           <p><a class="uplink" href="../../index.html">Orange Documentation v2.7.8</a></p>
           <ul>
<li><a class="reference internal" href="#">Association rules and frequent itemsets (<tt class="docutils literal"><span class="pre">associate</span></tt>)</a><ul>
<li><a class="reference internal" href="#association-rules-induction-algorithms">Association rules induction algorithms</a><ul>
<li><a class="reference internal" href="#sparse-basket-data-sets">Sparse (basket) data sets</a></li>
<li><a class="reference internal" href="#feature-value-non-sparse-data-sets">Feature-value (non-sparse) data sets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#representation-of-rules">Representation of rules</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
    
  <div class="section" id="association-rules-and-frequent-itemsets-associate">
<h1>Association rules and frequent itemsets (<tt class="docutils literal"><span class="pre">associate</span></tt>)<a class="headerlink" href="#association-rules-and-frequent-itemsets-associate" title="Permalink to this headline">¶</a></h1>
<p>Orange provides two algorithms for induction of
<a class="reference external" href="http://en.wikipedia.org/wiki/Association_rule_learning">association rules</a>,
a standard <a class="reference external" href="http://en.wikipedia.org/wiki/Apriori_algorithm">Apriori algorithm</a> <a class="reference internal" href="#agrawalsrikant1994">[AgrawalSrikant1994]</a> for sparse (basket) data analysis
and a variant of Apriori for attribute-value data sets. Both algorithms also support mining of frequent itemsets.</p>
<p>For example, consider a simple market basket data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Bread</span><span class="p">,</span> <span class="n">Milk</span>
<span class="n">Bread</span><span class="p">,</span> <span class="n">Diapers</span><span class="p">,</span> <span class="n">Beer</span><span class="p">,</span> <span class="n">Eggs</span>
<span class="n">Milk</span><span class="p">,</span> <span class="n">Diapers</span><span class="p">,</span> <span class="n">Beer</span><span class="p">,</span> <span class="n">Cola</span>
<span class="n">Bread</span><span class="p">,</span> <span class="n">Milk</span><span class="p">,</span> <span class="n">Diapers</span><span class="p">,</span> <span class="n">Beer</span>
<span class="n">Bread</span><span class="p">,</span> <span class="n">Milk</span><span class="p">,</span> <span class="n">Diapers</span><span class="p">,</span> <span class="n">Cola</span>
</pre></div>
</div>
<p>The following script induces association rules with items that appear in at least 30% of data instances
(transactions):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">Orange</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&quot;market-basket.basket&quot;</span><span class="p">)</span>

<span class="n">rules</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">associate</span><span class="o">.</span><span class="n">AssociationRulesSparseInducer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">support</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%4s</span><span class="s"> </span><span class="si">%4s</span><span class="s">  </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&quot;Supp&quot;</span><span class="p">,</span> <span class="s">&quot;Conf&quot;</span><span class="p">,</span> <span class="s">&quot;Rule&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%4.1f</span><span class="s"> </span><span class="si">%4.1f</span><span class="s">  </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">support</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p>The code reports on support and confidence first five rules found:</p>
<div class="highlight-python"><pre>Supp Conf  Rule
 0.4  1.0  Cola -&gt; Diapers
 0.4  0.5  Diapers -&gt; Cola
 0.4  1.0  Cola -&gt; Diapers Milk
 0.4  1.0  Cola Diapers -&gt; Milk
 0.4  1.0  Cola Milk -&gt; Diapers</pre>
</div>
<p>In Apriori, association rule induction is two-stage algorithm first finds itemsets that frequently appear in
the data and have sufficient support, and then splits them to rules of sufficient confidence. Function <cite>get_itemsets</cite>
reports on itemsets alone and skips rule induction:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">Orange</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&quot;market-basket.basket&quot;</span><span class="p">)</span>

<span class="n">ind</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">associate</span><span class="o">.</span><span class="n">AssociationRulesSparseInducer</span><span class="p">(</span><span class="n">support</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">storeExamples</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">itemsets</span> <span class="o">=</span> <span class="n">ind</span><span class="o">.</span><span class="n">get_itemsets</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">for</span> <span class="n">itemset</span><span class="p">,</span> <span class="n">tids</span> <span class="ow">in</span> <span class="n">itemsets</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="k">print</span> <span class="s">&quot;(</span><span class="si">%4.2f</span><span class="s">) </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tids</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)),</span>
                          <span class="s">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="n">item</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">itemset</span><span class="p">))</span>
</pre></div>
</div>
<p>The above script lists frequent itemsets and their support:</p>
<div class="highlight-python"><pre>(0.40) Cola
(0.40) Cola Diapers
(0.40) Cola Diapers Milk
(0.40) Cola Milk
(0.60) Beer</pre>
</div>
<div class="section" id="association-rules-induction-algorithms">
<h2>Association rules induction algorithms<a class="headerlink" href="#association-rules-induction-algorithms" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="#Orange.associate.AssociationRulesSparseInducer" title="Orange.associate.AssociationRulesSparseInducer"><tt class="xref py py-class docutils literal"><span class="pre">AssociationRulesSparseInducer</span></tt></a> induces frequent itemsets and association rules from sparse data sets. These
can be either provided in the basket format (see <a class="reference internal" href="Orange.data.formats.html"><em>Loading and saving data</em></a>) or in an attribute-value format where any
entry in the data table is considered as presence of a feature in the transaction (an item),
and any unknown (empty) entry signifies its absence. <a class="reference internal" href="#Orange.associate.AssociationRulesInducer" title="Orange.associate.AssociationRulesInducer"><tt class="xref py py-class docutils literal"><span class="pre">AssociationRulesInducer</span></tt></a> works feature-value data,
where am item is a combination of feature and its value (e.g., <cite>astigmatic=yes</cite>).</p>
<div class="section" id="sparse-basket-data-sets">
<h3>Sparse (basket) data sets<a class="headerlink" href="#sparse-basket-data-sets" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="Orange.associate.AssociationRulesSparseInducer">
<em class="property">class </em><tt class="descclassname">Orange.associate.</tt><tt class="descname">AssociationRulesSparseInducer</tt><a class="headerlink" href="#Orange.associate.AssociationRulesSparseInducer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="Orange.associate.AssociationRulesSparseInducer.support">
<tt class="descname">support</tt><a class="headerlink" href="#Orange.associate.AssociationRulesSparseInducer.support" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimal support for the rule. Depending on the data set it should be set to sufficiently high value
to avoid running out of working memory (default: 0.3).</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRulesSparseInducer.confidence">
<tt class="descname">confidence</tt><a class="headerlink" href="#Orange.associate.AssociationRulesSparseInducer.confidence" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimal confidence for the rule.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRulesSparseInducer.store_examples">
<tt class="descname">store_examples</tt><a class="headerlink" href="#Orange.associate.AssociationRulesSparseInducer.store_examples" title="Permalink to this definition">¶</a></dt>
<dd><p>Store the examples covered by each rule and
those confirming it.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRulesSparseInducer.max_item_sets">
<tt class="descname">max_item_sets</tt><a class="headerlink" href="#Orange.associate.AssociationRulesSparseInducer.max_item_sets" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximal number of itemsets induced. Orange will stop with inference of
frequent itemsets once this number of itemsets is reached.</p>
</dd></dl>

<dl class="method">
<dt id="Orange.associate.AssociationRulesSparseInducer.__call__">
<tt class="descname">__call__</tt><big>(</big><em>data</em>, <em>weight_id</em><big>)</big><a class="headerlink" href="#Orange.associate.AssociationRulesSparseInducer.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Induce rules from the provided data set.</p>
</dd></dl>

<dl class="method">
<dt id="Orange.associate.AssociationRulesSparseInducer.get_itemsets">
<tt class="descname">get_itemsets</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#Orange.associate.AssociationRulesSparseInducer.get_itemsets" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given data set, return a list of frequent itemsets. List elements are pairs,
where the first element includes indices of features in the item set (negative for sparse data) and
the second element a list of indices supporting the itemset.
If <a class="reference internal" href="#Orange.associate.AssociationRulesSparseInducer.store_examples" title="Orange.associate.AssociationRulesSparseInducer.store_examples"><tt class="xref py py-obj docutils literal"><span class="pre">store_examples</span></tt></a> is False, the second
element is None.</p>
</dd></dl>

</dd></dl>

<p>To test this rule inducer, we will first create a sparse data sets consisting of list of words in sentences from a brief description
of Spanish Inquisition, given by Palin et al.:</p>
<blockquote>
<div><p>NOBODY expects the Spanish Inquisition! Our chief weapon is surprise...surprise and fear...fear and surprise.... Our two weapons are fear and surprise...and ruthless efficiency.... Our <em>three</em> weapons are fear, surprise, and ruthless efficiency...and an almost fanatical devotion to the Pope.... Our <em>four</em>...no... <em>Amongst</em> our weapons.... Amongst our weaponry...are such elements as fear, surprise.... I&#8217;ll come in again.</p>
<p>NOBODY expects the Spanish Inquisition! Amongst our weaponry are such diverse elements as: fear, surprise, ruthless efficiency, an almost fanatical devotion to the Pope, and nice red uniforms - Oh damn!</p>
</div></blockquote>
<p>After some cleaning (e.g., removal of stopwords and punctuation marks),
our data set looks like (<a class="reference download internal" href="../../_downloads/inquisition.basket"><tt class="xref download docutils literal"><span class="pre">inquisition.basket</span></tt></a>):</p>
<div class="highlight-python"><pre>nobody, expects, the, Spanish, Inquisition
our, chief, weapon, is, surprise, surprise, and, fear,fear, and, surprise
our, two, weapons, are, fear, and, surprise, and, ruthless, efficiency
our, three, weapons, are, fear, surprise, and, ruthless, efficiency, and, an, almost, fanatical, devotion, to, the, Pope
our, four, no
amongst, our, weapons
amongst, our, weaponry, are, such, elements, as, fear, surprise
I'll, come, in, again
nobody, expects, the, Spanish, Inquisition
amongst, our, weaponry, are, such, diverse, elements, as, fear, surprise, ruthless, efficiency, an, almost, fanatical, devotion, to, the, Pope, and, nice, red, uniforms, oh damn</pre>
</div>
<p>The following script induces the association rules:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">Orange</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&quot;inquisition.basket&quot;</span><span class="p">)</span>

<span class="n">rules</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">associate</span><span class="o">.</span><span class="n">AssociationRulesSparseInducer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">support</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;</span><span class="si">%5s</span><span class="s">   </span><span class="si">%5s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&quot;supp&quot;</span><span class="p">,</span> <span class="s">&quot;conf&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%5.3f</span><span class="s">   </span><span class="si">%5.3f</span><span class="s">   </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">support</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p>The induced rules are surprisingly fear-full:</p>
<div class="highlight-python"><pre>0.500   1.000   fear -&gt; surprise
0.500   1.000   surprise -&gt; fear
0.500   1.000   fear -&gt; surprise our
0.500   1.000   fear surprise -&gt; our
0.500   1.000   fear our -&gt; surprise
0.500   1.000   surprise -&gt; fear our
0.500   1.000   surprise our -&gt; fear
0.500   0.714   our -&gt; fear surprise
0.500   1.000   fear -&gt; our
0.500   0.714   our -&gt; fear
0.500   1.000   surprise -&gt; our
0.500   0.714   our -&gt; surprise</pre>
</div>
<p>To get only a list of supported item sets, one should call the method
get_itemsets:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">inducer</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">associate</span><span class="o">.</span><span class="n">AssociationRulesSparseInducer</span><span class="p">(</span><span class="n">support</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">store_examples</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">itemsets</span> <span class="o">=</span> <span class="n">inducer</span><span class="o">.</span><span class="n">get_itemsets</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Now itemsets is a list of itemsets along with the examples supporting them
since we set store_examples to True.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">itemsets</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">((-11, -7), [1, 2, 3, 6, 9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">itemsets</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
<span class="go">[&#39;surprise&#39;, &#39;our&#39;]</span>
</pre></div>
</div>
<p>The sixth itemset contains features with indices -11 and -7, that is, the
words &#8220;surprise&#8221; and &#8220;our&#8221;. The examples supporting it are those with
indices 1,2, 3, 6 and 9.</p>
<p>This way of representing the itemsets is memory efficient and faster than using
objects like <a class="reference internal" href="Orange.feature.descriptor.html#Orange.feature.Descriptor" title="Orange.feature.Descriptor"><tt class="xref py py-obj docutils literal"><span class="pre">Descriptor</span></tt></a> and <a class="reference internal" href="Orange.data.instance.html#Orange.data.Instance" title="Orange.data.Instance"><tt class="xref py py-obj docutils literal"><span class="pre">Instance</span></tt></a>.</p>
</div>
<div class="section" id="feature-value-non-sparse-data-sets">
<span id="non-sparse-examples"></span><h3>Feature-value (non-sparse) data sets<a class="headerlink" href="#feature-value-non-sparse-data-sets" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#Orange.associate.AssociationRulesInducer" title="Orange.associate.AssociationRulesInducer"><tt class="xref py py-class docutils literal"><span class="pre">AssociationRulesInducer</span></tt></a> works with non-sparse data.</p>
<dl class="class">
<dt id="Orange.associate.AssociationRulesInducer">
<em class="property">class </em><tt class="descclassname">Orange.associate.</tt><tt class="descname">AssociationRulesInducer</tt><a class="headerlink" href="#Orange.associate.AssociationRulesInducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Association rule induction from non-sparse data sets. An item is a feature-value combination. Unknown values in
the data table are ignored. The algorithm can also be used to search only for classification rules where the
feature on the right-hand side is the class variable.</p>
<dl class="attribute">
<dt id="Orange.associate.AssociationRulesInducer.support">
<tt class="descname">support</tt><a class="headerlink" href="#Orange.associate.AssociationRulesInducer.support" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimal support of the induced rule (default: 0.3)</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRulesInducer.confidence">
<tt class="descname">confidence</tt><a class="headerlink" href="#Orange.associate.AssociationRulesInducer.confidence" title="Permalink to this definition">¶</a></dt>
<dd><p>Minimal confidence of the induced rule.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRulesInducer.classification_rules">
<tt class="descname">classification_rules</tt><a class="headerlink" href="#Orange.associate.AssociationRulesInducer.classification_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, the classification rules are constructed instead
of general association rules (default: False).</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRulesInducer.store_examples">
<tt class="descname">store_examples</tt><a class="headerlink" href="#Orange.associate.AssociationRulesInducer.store_examples" title="Permalink to this definition">¶</a></dt>
<dd><p>Store the examples covered by each rule and those
confirming it.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRulesInducer.max_item_sets">
<tt class="descname">max_item_sets</tt><a class="headerlink" href="#Orange.associate.AssociationRulesInducer.max_item_sets" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximal number of itemsets induced. After reaching this limit the inference algorithm will stop.</p>
</dd></dl>

<dl class="method">
<dt id="Orange.associate.AssociationRulesInducer.__call__">
<tt class="descname">__call__</tt><big>(</big><em>data</em>, <em>weight_id</em><big>)</big><a class="headerlink" href="#Orange.associate.AssociationRulesInducer.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Induce rules from the given data set.</p>
</dd></dl>

<dl class="method">
<dt id="Orange.associate.AssociationRulesInducer.get_itemsets">
<tt class="descname">get_itemsets</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#Orange.associate.AssociationRulesInducer.get_itemsets" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given data set, return a list of frequent itemsets. The list consists of pairs, where
the first element includes indices of features in the item set (negative for sparse data), and
the second element a list of indices supporting the item set. If <a class="reference internal" href="#Orange.associate.AssociationRulesInducer.store_examples" title="Orange.associate.AssociationRulesInducer.store_examples"><tt class="xref py py-obj docutils literal"><span class="pre">store_examples</span></tt></a> is False, the second
element is None.</p>
</dd></dl>

</dd></dl>

<p>Following is an example script that uses <a class="reference internal" href="#Orange.associate.AssociationRulesInducer" title="Orange.associate.AssociationRulesInducer"><tt class="xref py py-class docutils literal"><span class="pre">AssociationRulesInducer</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">Orange</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&quot;lenses&quot;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Association rules:&quot;</span>
<span class="n">rules</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">associate</span><span class="o">.</span><span class="n">AssociationRulesInducer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">support</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%5.3f</span><span class="s">  </span><span class="si">%5.3f</span><span class="s">  </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">support</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p>Script reports the following rules (first colon is support, second confidence):</p>
<div class="highlight-python"><pre>0.333  0.533  lenses=none -&gt; prescription=hypermetrope
0.333  0.667  prescription=hypermetrope -&gt; lenses=none
0.333  0.533  lenses=none -&gt; astigmatic=yes
0.333  0.667  astigmatic=yes -&gt; lenses=none
0.500  0.800  lenses=none -&gt; tear_rate=reduced
0.500  1.000  tear_rate=reduced -&gt; lenses=none</pre>
</div>
<p>To infer classification rules we can use a similar script but set <cite>classificationRules</cite> to 1:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&quot;Classification rules&quot;</span>
<span class="n">rules</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">associate</span><span class="o">.</span><span class="n">AssociationRulesInducer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">support</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">classificationRules</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>These rules are a subset of association rules that in a consequent include only a class variable:</p>
<div class="highlight-python"><pre>0.333  0.667  prescription=hypermetrope -&gt; lenses=none
0.333  0.667  astigmatic=yes -&gt; lenses=none
0.500  1.000  tear_rate=reduced -&gt; lenses=none</pre>
</div>
<p>Frequent itemsets are induced in a similar fashion as for sparse data, except that the
first element of the tuple, the item set, is represented not by indices of
features, as before, but with tuples (feature-index, value-index):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">inducer</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">associate</span><span class="o">.</span><span class="n">AssociationRulesInducer</span><span class="p">(</span><span class="n">support</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">store_examples</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">itemsets</span> <span class="o">=</span> <span class="n">inducer</span><span class="o">.</span><span class="n">get_itemsets</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">print</span> <span class="n">itemsets</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
<p>The script prints out:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">])</span>
</pre></div>
</div>
<p>reporting that the ninth itemset contains the second value of the third feature
(2, 1), and the first value of the fifth (4, 0).</p>
</div>
</div>
<div class="section" id="representation-of-rules">
<h2>Representation of rules<a class="headerlink" href="#representation-of-rules" title="Permalink to this headline">¶</a></h2>
<p>Methods for induction of association rules return the induced rules in
<tt class="xref py py-class docutils literal"><span class="pre">AssociationRules</span></tt>, which is basically a list of <a class="reference internal" href="#Orange.associate.AssociationRule" title="Orange.associate.AssociationRule"><tt class="xref py py-class docutils literal"><span class="pre">AssociationRule</span></tt></a> instances.</p>
<dl class="class">
<dt id="Orange.associate.AssociationRule">
<em class="property">class </em><tt class="descclassname">Orange.associate.</tt><tt class="descname">AssociationRule</tt><a class="headerlink" href="#Orange.associate.AssociationRule" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="Orange.associate.AssociationRule.__init__">
<tt class="descname">__init__</tt><big>(</big><em>left</em>, <em>right</em>, <em>n_applies_left</em>, <em>n_applies_right</em>, <em>n_applies_both</em>, <em>n_examples</em><big>)</big><a class="headerlink" href="#Orange.associate.AssociationRule.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an association rule and compute evaluation scores (see below) based on counts given in the
arguments of the call.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">__init__</tt><big>(</big><em>left</em>, <em>right</em>, <em>support</em>, <em>confidence</em><big>)</big></dt>
<dd><p>Construct association rule and compute its support and confidence. For manual construction of such such a rule set other attributes
manually, as AssociationRules&#8217;s constructor cannot compute anything only from support and
confidence.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">__init__</tt><big>(</big><em>rule</em><big>)</big></dt>
<dd><p>Given an association rule as the argument, constructor a copy of the rule.</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">left, right</tt></dt>
<dd><p>The left and the right side of the rule. Both are given as <a class="reference internal" href="Orange.data.instance.html#Orange.data.Instance" title="Orange.data.Instance"><tt class="xref py py-class docutils literal"><span class="pre">Orange.data.Instance</span></tt></a>.
In rules created by <a class="reference internal" href="#Orange.associate.AssociationRulesSparseInducer" title="Orange.associate.AssociationRulesSparseInducer"><tt class="xref py py-class docutils literal"><span class="pre">AssociationRulesSparseInducer</span></tt></a> from data instances that
contain all values as meta-values, left and right are data instances in the
same form. Otherwise, values in left that do not appear in the rule
are &#8220;don&#8217;t care&#8221;, and value in right are &#8220;don&#8217;t know&#8221;. Both can,
however, be tested by <a class="reference internal" href="Orange.data.value.html#Orange.data.Value.is_special" title="Orange.data.Value.is_special"><tt class="xref py py-meth docutils literal"><span class="pre">is_special()</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">n_left, n_right</tt></dt>
<dd><p>The number of items on the left and on the
right side of the rule.</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">n_applies_left, n_applies_right, n_applies_both</tt></dt>
<dd><p>The number of data instances matching the left, right and both sides of the rule, correspondingly.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRule.n_examples">
<tt class="descname">n_examples</tt><a class="headerlink" href="#Orange.associate.AssociationRule.n_examples" title="Permalink to this definition">¶</a></dt>
<dd><p>The total number of training instances.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRule.support">
<tt class="descname">support</tt><a class="headerlink" href="#Orange.associate.AssociationRule.support" title="Permalink to this definition">¶</a></dt>
<dd><p>nAppliesBoth/nExamples.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRule.confidence">
<tt class="descname">confidence</tt><a class="headerlink" href="#Orange.associate.AssociationRule.confidence" title="Permalink to this definition">¶</a></dt>
<dd><p>n_applies_both/n_applies_left.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRule.coverage">
<tt class="descname">coverage</tt><a class="headerlink" href="#Orange.associate.AssociationRule.coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>n_applies_left/n_examples.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRule.strength">
<tt class="descname">strength</tt><a class="headerlink" href="#Orange.associate.AssociationRule.strength" title="Permalink to this definition">¶</a></dt>
<dd><p>n_applies_right/n_applies_left.</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRule.lift">
<tt class="descname">lift</tt><a class="headerlink" href="#Orange.associate.AssociationRule.lift" title="Permalink to this definition">¶</a></dt>
<dd><p>n_examples * n_applies_both / (n_applies_left * n_applies_right).</p>
</dd></dl>

<dl class="attribute">
<dt id="Orange.associate.AssociationRule.leverage">
<tt class="descname">leverage</tt><a class="headerlink" href="#Orange.associate.AssociationRule.leverage" title="Permalink to this definition">¶</a></dt>
<dd><p>(n_Applies_both * n_examples - n_applies_left * n_applies_right).</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">examples, match_left, match_both</tt></dt>
<dd><p>If store_examples was <cite>True</cite> during induction, examples contain a copy
of the data table used to induce the rules. Attributes <cite>match_left</cite>
and <cite>match_both</cite> are lists of indices of data instances that match the left,
right and both sides of the rule, respectively.</p>
</dd></dl>

<dl class="method">
<dt id="Orange.associate.AssociationRule.applies_left">
<tt class="descname">applies_left</tt><big>(</big><em>data_instance</em><big>)</big><a class="headerlink" href="#Orange.associate.AssociationRule.applies_left" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Orange.associate.AssociationRule.applies_right">
<tt class="descname">applies_right</tt><big>(</big><em>data_instance</em><big>)</big><a class="headerlink" href="#Orange.associate.AssociationRule.applies_right" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Orange.associate.AssociationRule.applies_both">
<tt class="descname">applies_both</tt><big>(</big><em>data_instance</em><big>)</big><a class="headerlink" href="#Orange.associate.AssociationRule.applies_both" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if data instance is matched by the left, right or both sides of
the rule, respectively. The data instance must be in the same representation as data from which the rule
was inferred.</p>
</dd></dl>

</dd></dl>

<p>Association rule inducers do not store information on supporting data instances from training data set.
Let us write a script that finds the data instances that
match the rule (fit both sides of it) and those that contradict it (fit the
left-hand side but not the right):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">Orange</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&quot;lenses&quot;</span><span class="p">)</span>
<span class="n">rules</span> <span class="o">=</span> <span class="n">Orange</span><span class="o">.</span><span class="n">associate</span><span class="o">.</span><span class="n">AssociationRulesInducer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">support</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">rule</span> <span class="o">=</span> <span class="n">rules</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span> <span class="s">&quot;Rule: &quot;</span><span class="p">,</span> <span class="n">rule</span><span class="p">,</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>

<span class="k">print</span> <span class="s">&quot;Supporting data instances:&quot;</span>
<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">rule</span><span class="o">.</span><span class="n">appliesBoth</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
        <span class="k">print</span> <span class="n">d</span>
<span class="k">print</span>

<span class="k">print</span> <span class="s">&quot;Contradicting data instances:&quot;</span>
<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">rule</span><span class="o">.</span><span class="n">applies_left</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">rule</span><span class="o">.</span><span class="n">applies_right</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
        <span class="k">print</span> <span class="n">d</span>
<span class="k">print</span>
</pre></div>
</div>
<p>The latter printouts get simpler and faster if we instruct the inducer to
store the examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&quot;Match left: &quot;</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rule</span><span class="o">.</span><span class="n">examples</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rule</span><span class="o">.</span><span class="n">match_left</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Match both: &quot;</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rule</span><span class="o">.</span><span class="n">examples</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rule</span><span class="o">.</span><span class="n">match_both</span><span class="p">)</span>
</pre></div>
</div>
<p>The &#8220;contradicting&#8221; examples are those whose indices are found in
match_left but not in match_both. The memory friendlier and the faster way
to compute this is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rule</span><span class="o">.</span><span class="n">match_left</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rule</span><span class="o">.</span><span class="n">match_both</span><span class="p">]</span>
<span class="go">[0, 2, 8, 10, 16, 17, 18]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">set</span><span class="p">(</span><span class="n">rule</span><span class="o">.</span><span class="n">match_left</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">rule</span><span class="o">.</span><span class="n">match_both</span><span class="p">)</span>
<span class="go">set([0, 2, 8, 10, 16, 17, 18])</span>
</pre></div>
</div>
</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="Orange.associate.print_rules">
<tt class="descclassname">Orange.associate.</tt><tt class="descname">print_rules</tt><big>(</big><em>rules</em>, <em>ms=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#Orange.associate.print_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the association rules.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rules</strong> (<em>AssociationRules</em>) &#8211; Association rules.</li>
<li><strong>ms</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; Attributes of the rule to be printed with the rule (default: []). To report on confidence and support
use <tt class="docutils literal"><span class="pre">ms=[&quot;support&quot;,</span> <span class="pre">&quot;confidence&quot;]</span></tt></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="Orange.associate.sort">
<tt class="descclassname">Orange.associate.</tt><tt class="descname">sort</tt><big>(</big><em>rules, ms=['support']</em><big>)</big><a class="headerlink" href="#Orange.associate.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the rules according to the given criteria.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rules</strong> (<em>AssociationRules</em>) &#8211; Association rules.</li>
<li><strong>ms</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; Sort keys (list of association rules&#8217; attributes, default: <cite>[&#8220;support&#8221;]</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="agrawalsrikant1994" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[AgrawalSrikant1994]</a></td><td>R Agrawal and R Srikant: Fast algorithms for mining association
rules in large databases. In Proc. 20th International Conference on Very Large Data Bases, pages 487-499,
Santiago, Chile, September 1994.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="tansteinbachkumar2005" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[TanSteinbachKumar2005]</td><td>P-N Tan, M Steinbach and V Kumar: Introduction to Data Mining,
chapter on <a class="reference external" href="http://www-users.cs.umn.edu/~kumar/dmbook/ch6.pdf">Association analysis: basic concepts and algorithms</a>, Addison Wesley, 2005.</td></tr>
</tbody>
</table>
</div>
</div>



          </div>
        </div>
      </div> 
      <div class="clearer"></div>
    </div>  
	
    <div class="footer">
    </div>
	            </div>
        </div>
        <div class="border1"></div>
        <div class="border2"></div>
    </div>
</div>

  </body>
</html>